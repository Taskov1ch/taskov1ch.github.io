<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–∏–∫—Ç–æ—Ä–∏–Ω–∞: –°—Ç—Ä–∞–Ω—ã –∏ –°—Ç–æ–ª–∏—Ü—ã</title>
    <style>
        /* --- –°—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π --- */
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap');
        :root { --bg-color: #12121f; --primary-color: #1e1e3f; --secondary-color: #2c2c54; --accent-color: #ff4757; --text-color: #f5f6fa; --correct-color: #4cd137; --incorrect-color: #e84118; --font-family: 'Montserrat', sans-serif; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: var(--font-family); background-color: var(--bg-color); color: var(--text-color); display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 1rem; overflow: hidden; }
        .container { width: 100%; max-width: 800px; background-color: var(--primary-color); border-radius: 20px; padding: 2rem; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4); position: relative; overflow: hidden; border: 2px solid var(--secondary-color); }
        .screen { display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center; animation: fadeIn 0.5s ease-in-out; }
        .screen.active { display: flex; }
        h1 { font-size: 2.5rem; margin-bottom: 1rem; color: var(--accent-color); } h2 { font-size: 2rem; margin-bottom: 2rem; } p { font-size: 1.2rem; margin-bottom: 2rem; line-height: 1.6; }
        .button { background: linear-gradient(145deg, var(--accent-color), #c4303e); color: var(--text-color); border: none; padding: 1rem 2rem; font-size: 1.2rem; font-weight: 600; border-radius: 10px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255, 71, 87, 0.3); }
        .button:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(255, 71, 87, 0.5); }
        .button:disabled { background: #555; cursor: not-allowed; transform: none; box-shadow: none; }
        #name-input { font-family: var(--font-family); font-size: 1.2rem; width: 80%; max-width: 400px; padding: 0.8rem; margin-bottom: 1.5rem; border-radius: 8px; border: 2px solid var(--secondary-color); background-color: var(--bg-color); color: var(--text-color); text-align: center; }
        #name-input:focus { outline: none; border-color: var(--accent-color); }
        #name-input.input-error { animation: shake 0.5s ease-in-out; border-color: var(--incorrect-color); }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        @keyframes fadeOut { from { opacity: 1; transform: scale(1); } to { opacity: 0; transform: scale(0.95); } }
        .fade-out { animation: fadeOut 0.5s ease-in-out forwards; }
        #quiz-screen { width: 100%; justify-content: flex-start; }
        .quiz-header { display: flex; justify-content: space-between; align-items: center; width: 100%; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem; }
        .header-item { background-color: var(--secondary-color); padding: 0.5rem 1rem; border-radius: 8px; font-size: 1.1rem; font-weight: 600; min-width: 120px; text-align: center; }
        #question-counter { color: var(--accent-color); }
        .timer-container { width: 100%; height: 10px; background-color: var(--secondary-color); border-radius: 5px; margin-bottom: 2rem; overflow: hidden; }
        #timer-bar { height: 100%; width: 100%; background: linear-gradient(90deg, var(--correct-color), #a2ff9b); border-radius: 5px; }
        .timer-animated { transition: width 10s linear; }
        #question-text { font-size: 1.8rem; margin-bottom: 2rem; font-weight: 600; min-height: 80px; }
        .answers-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; width: 100%; margin-bottom: 2rem; }
        .answer-btn { background-color: var(--secondary-color); border: 2px solid transparent; color: var(--text-color); padding: 1rem; font-size: 1.1rem; border-radius: 10px; cursor: pointer; transition: all 0.3s ease; min-height: 70px; display: flex; justify-content: center; align-items: center; }
        .answer-btn:hover:not(:disabled) { border-color: var(--accent-color); transform: translateY(-2px); }
        .answer-btn.correct { background-color: var(--correct-color); border-color: var(--correct-color); color: #fff; animation: pulse 0.5s; }
        .answer-btn.incorrect { background-color: var(--incorrect-color); border-color: var(--incorrect-color); color: #fff; }
        .answer-btn:disabled { cursor: not-allowed; opacity: 0.7; }
        .quiz-footer { margin-top: 1rem; }
        #end-quiz-btn { background: #6a6a6a; }
        #end-quiz-btn:hover { background: #808080; box-shadow: 0 4px 15px rgba(128, 128, 128, 0.3); }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); } 20%, 40%, 60%, 80% { transform: translateX(8px); } }
        .shake { animation: shake 0.5s ease-in-out; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        .confetti { position: absolute; width: 10px; height: 10px; background-color: #f00; opacity: 0; animation: confetti-fall 2s ease-out forwards; }
        @keyframes confetti-fall { 0% { transform: translateY(-100px) rotateZ(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotateZ(720deg); opacity: 0; } }
        #final-screen h2 { font-size: 2.5rem; margin-bottom: 1rem; }
        .stats { display: flex; justify-content: space-around; width: 100%; margin: 2rem 0; flex-wrap: wrap; gap: 1rem; }
        .stat-item { background-color: var(--secondary-color); padding: 1.5rem; border-radius: 12px; flex-basis: 200px; flex-grow: 1; }
        .stat-item h3 { font-size: 1.2rem; margin-bottom: 0.5rem; color: var(--accent-color); }
        .stat-item p { font-size: 2rem; font-weight: 700; margin: 0; }
        #cutscene-screen, #loading-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--bg-color); z-index: 100; }
        #loading-message { font-size: 2rem; }
        @keyframes rainbow-text { 0% { color: hsl(0, 100%, 60%); } 15% { color: hsl(50, 100%, 60%); } 30% { color: hsl(120, 100%, 60%); } 45% { color: hsl(180, 100%, 60%); } 60% { color: hsl(240, 100%, 60%); } 75% { color: hsl(290, 100%, 60%); } 100% { color: hsl(360, 100%, 60%); } }
        @keyframes levitate { 0%, 100% { transform: translateY(0) translateX(0) rotate(0); } 25% { transform: translateY(-5px) translateX(3px) rotate(-1deg); } 75% { transform: translateY(5px) translateX(-3px) rotate(1deg); } }
        #score-counter { font-size: 8vw; font-weight: 700; text-shadow: 0 0 10px rgba(255, 255, 255, 0.5); animation: rainbow-text 5s linear infinite, levitate 8s ease-in-out infinite; }
        #fireworks-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 101; pointer-events: none; }
        .firework { position: absolute; width: 4px; height: 4px; background-color: white; border-radius: 50%; }
        .spark { position: absolute; width: 3px; height: 3px; border-radius: 50%; }
        @media (max-width: 768px) { .container { padding: 1.5rem; } h1 { font-size: 2rem; } h2 { font-size: 1.8rem; } .answers-grid { grid-template-columns: 1fr; } .quiz-header { flex-direction: column; gap: 0.5rem; } #question-text { font-size: 1.5rem; min-height: 60px; } }
    </style>
</head>
<body>
    <div class="container">
        <div id="start-screen" class="screen active"><h1>–°—Ç—Ä–∞–Ω—ã –∏ –°—Ç–æ–ª–∏—Ü—ã</h1><p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å.</p><input type="text" id="name-input" placeholder="–í–∞—à–µ –∏–º—è"><button id="start-btn" class="button">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button></div>
        <div id="quiz-screen" class="screen"><div class="quiz-header"><div class="header-item">–í–æ–ø—Ä–æ—Å: <span id="question-counter">1/134</span></div><div class="header-item">–û—á–∫–∏: <span id="score">0</span></div><div class="header-item">–ö–æ–º–±–æ: <span id="combo">x1</span></div></div><div class="timer-container"><div id="timer-bar"></div></div><h2 id="question-text">–ö–∞–∫–∞—è —Å—Ç–æ–ª–∏—Ü–∞ —É —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω—ã?</h2><div class="answers-grid"><button class="answer-btn"></button><button class="answer-btn"></button><button class="answer-btn"></button><button class="answer-btn"></button></div><div class="quiz-footer"><button id="end-quiz-btn" class="button">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button></div></div>
        <div id="final-screen" class="screen"><h2>–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</h2><div class="stats"><div class="stat-item"><h3>–ò—Ç–æ–≥–æ–≤—ã–π —Å—á—ë—Ç</h3><p id="final-score">0</p></div><div class="stat-item"><h3>–õ—É—á—à–µ–µ –∫–æ–º–±–æ</h3><p id="max-combo">x0</p></div><div class="stat-item"><h3>–¢–æ—á–Ω–æ—Å—Ç—å</h3><p id="accuracy">0%</p></div></div><button id="restart-btn" class="button">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button></div>
    </div>
    <div id="loading-screen" class="screen"><h2 id="loading-message">–ó–∞–≥—Ä—É–∑–∫–∞...</h2></div>
    <div id="cutscene-screen" class="screen"><div id="score-counter">0</div></div>
    <div id="fireworks-container"></div>
    <audio id="final-music" src="final_music.mp3" preload="auto"></audio><audio id="quiz-music" src="quiz_music.mp3" preload="auto" loop></audio><audio id="correct-sound" src="correct_sound.mp3" preload="auto"></audio><audio id="incorrect-sound" src="incorrect_sound.mp3" preload="auto"></audio>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const questions = [
            { country: '–ò—Ä–ª–∞–Ω–¥–∏—è', capital: '–î—É–±–ª–∏–Ω' }, { country: '–ù–∏–¥–µ—Ä–ª–∞–Ω–¥—ã', capital: '–ê–º—Å—Ç–µ—Ä–¥–∞–º' }, { country: '–ë–µ–ª—å–≥–∏—è', capital: '–ë—Ä—é—Å—Å–µ–ª—å' }, { country: '–õ—é–∫—Å–µ–º–±—É—Ä–≥', capital: '–õ—é–∫—Å–µ–º–±—É—Ä–≥' }, { country: '–ú–æ–Ω–∞–∫–æ', capital: '–ú–æ–Ω–∞–∫–æ' }, { country: '–ê–≤—Å—Ç—Ä–∏—è', capital: '–í–µ–Ω–∞' }, { country: '–õ–∏—Ö—Ç–µ–Ω—à—Ç–µ–π–Ω', capital: '–í–∞–¥—É—Ü' }, { country: '–®–≤–µ–π—Ü–∞—Ä–∏—è', capital: '–ë–µ—Ä–Ω' }, { country: '–ë–µ–ª–æ—Ä—É—Å—Å–∏—è (–ë–µ–ª–∞—Ä—É—Å—å)', capital: '–ú–∏–Ω—Å–∫' }, { country: '–ü–æ–ª—å—à–∞', capital: '–í–∞—Ä—à–∞–≤–∞' }, { country: '–ß–µ—Ö–∏—è', capital: '–ü—Ä–∞–≥–∞' }, { country: '–°–ª–æ–≤–∞–∫–∏—è', capital: '–ë—Ä–∞—Ç–∏—Å–ª–∞–≤–∞' }, { country: '–í–µ–Ω–≥—Ä–∏—è', capital: '–ë—É–¥–∞–ø–µ—à—Ç' }, { country: '–ú–æ–ª–¥–∞–≤–∏—è (–ú–æ–ª–¥–æ–≤–∞)', capital: '–ö–∏—à–∏–Ω—ë–≤' }, { country: '–†—É–º—ã–Ω–∏—è', capital: '–ë—É—Ö–∞—Ä–µ—Å—Ç' }, { country: '–ë–æ–ª–≥–∞—Ä–∏—è', capital: '–°–æ—Ñ–∏—è' }, { country: '–ü–æ—Ä—Ç—É–≥–∞–ª–∏—è', capital: '–õ–∏—Å—Å–∞–±–æ–Ω' }, { country: '–ò—Å–ø–∞–Ω–∏—è', capital: '–ú–∞–¥—Ä–∏–¥' }, { country: '–ê–Ω–¥–æ—Ä—Ä–∞', capital: '–ê–Ω–¥–æ—Ä—Ä–∞-–ª–∞-–í–µ–ª—å—è' }, { country: '–°–∞–Ω-–ú–∞—Ä–∏–Ω–æ', capital: '–°–∞–Ω-–ú–∞—Ä–∏–Ω–æ' }, { country: '–ú–∞–ª—å—Ç–∞', capital: '–í–∞–ª–ª–µ—Ç—Ç–∞' }, { country: '–°–ª–æ–≤–µ–Ω–∏—è', capital: '–õ—é–±–ª—è–Ω–∞' }, { country: '–•–æ—Ä–≤–∞—Ç–∏—è', capital: '–ó–∞–≥—Ä–µ–±' }, { country: '–ë–æ—Å–Ω–∏—è –∏ –ì–µ—Ä—Ü–µ–≥–æ–≤–∏–Ω–∞', capital: '–°–∞—Ä–∞–µ–≤–æ' }, { country: '–°–µ—Ä–±–∏—è', capital: '–ë–µ–ª–≥—Ä–∞–¥' }, { country: '–ß–µ—Ä–Ω–æ–≥–æ—Ä–∏—è', capital: '–ü–æ–¥–≥–æ—Ä–∏—Ü–∞' }, { country: '–ú–∞–∫–µ–¥–æ–Ω–∏—è', capital: '–°–∫–æ–ø—å–µ' }, { country: '–ê–ª–±–∞–Ω–∏—è', capital: '–¢–∏—Ä–∞–Ω–∞' }, { country: '–ì—Ä–µ—Ü–∏—è', capital: '–ê—Ñ–∏–Ω—ã' }, { country: '–î–∞–Ω–∏—è', capital: '–ö–æ–ø–µ–Ω–≥–∞–≥–µ–Ω' }, { country: '–ò—Å–ª–∞–Ω–¥–∏—è', capital: '–†–µ–π–∫—å—è–≤–∏–∫' }, { country: '–§–∏–Ω–ª—è–Ω–¥–∏—è', capital: '–•–µ–ª—å—Å–∏–Ω–∫–∏' }, { country: '–®–≤–µ—Ü–∏—è', capital: '–°—Ç–æ–∫–≥–æ–ª—å–º' }, { country: '–ù–æ—Ä–≤–µ–≥–∏—è', capital: '–û—Å–ª–æ' }, { country: '–≠—Å—Ç–æ–Ω–∏—è', capital: '–¢–∞–ª–ª–∏–Ω' }, { country: '–õ–∞—Ç–≤–∏—è', capital: '–†–∏–≥–∞' }, { country: '–õ–∏—Ç–≤–∞', capital: '–í–∏–ª—å–Ω—é—Å' }, { country: '–ì—Ä—É–∑–∏—è', capital: '–¢–±–∏–ª–∏—Å–∏' }, { country: '–ê–±—Ö–∞–∑–∏—è', capital: '–°—É—Ö—É–º' }, { country: '–Æ–∂–Ω–∞—è –û—Å–µ—Ç–∏—è', capital: '–¶—Ö–∏–Ω–≤–∞–ª' }, { country: '–ê—Ä–º–µ–Ω–∏—è', capital: '–ï—Ä–µ–≤–∞–Ω' }, { country: '–ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω', capital: '–ë–∞–∫—É' }, { country: '–ö–∏–ø—Ä', capital: '–ù–∏–∫–æ—Å–∏—è' }, { country: '–°–∏—Ä–∏—è', capital: '–î–∞–º–∞—Å–∫' }, { country: '–õ–∏–≤–∞–Ω', capital: '–ë–µ–π—Ä—É—Ç' }, { country: '–ò–∑—Ä–∞–∏–ª—å', capital: '–ò–µ—Ä—É—Å–∞–ª–∏–º' }, { country: '–ò–æ—Ä–¥–∞–Ω–∏—è', capital: '–ê–º–º–∞–Ω' }, { country: '–ò—Ä–∞–∫', capital: '–ë–∞–≥–¥–∞–¥' }, { country: '–ö—É–≤–µ–π—Ç', capital: '–≠–ª—å-–ö—É–≤–µ–π—Ç' }, { country: '–ò—Ä–∞–Ω', capital: '–¢–µ–≥–µ—Ä–∞–Ω' }, { country: '–°–∞—É–¥–æ–≤—Å–∫–∞—è –ê—Ä–∞–≤–∏—è', capital: '–≠—Ä-–†–∏—è–¥' }, { country: '–ë–∞—Ö—Ä–µ–π–Ω', capital: '–ú–∞–Ω–∞–º–∞' }, { country: '–ö–∞—Ç–∞—Ä', capital: '–î–æ—Ö–∞' }, { country: '–û–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ –ê—Ä–∞–±—Å–∫–∏–µ –≠–º–∏—Ä–∞—Ç—ã', capital: '–ê–±—É-–î–∞–±–∏' }, { country: '–û–º–∞–Ω', capital: '–ú–∞—Å–∫–∞—Ç' }, { country: '–ô–µ–º–µ–Ω', capital: '–°–∞–Ω–∞' }, { country: '–ê—Ñ–≥–∞–Ω–∏—Å—Ç–∞–Ω', capital: '–ö–∞–±—É–ª' }, { country: '–ü–∞–∫–∏—Å—Ç–∞–Ω', capital: '–ò—Å–ª–∞–º–∞–±–∞–¥' }, { country: '–ù–µ–ø–∞–ª', capital: '–ö–∞—Ç–º–∞–Ω–¥—É' }, { country: '–ë—É—Ç–∞–Ω', capital: '–¢—Ö–∏–º–ø—Ö—É' }, { country: '–ë–∞–Ω–≥–ª–∞–¥–µ—à', capital: '–î–∞–∫–∫–∞' }, { country: '–®—Ä–∏-–õ–∞–Ω–∫–∞', capital: '–ö–æ–ª–æ–º–±–æ (–®—Ä–∏-–î–∂–∞—è–≤–∞—Ä–¥–µ–Ω–µ–ø—É—Ä–∞-–ö–æ—Ç—Ç–µ)' }, { country: '–ú–∞–ª—å–¥–∏–≤—ã', capital: '–ú–∞–ª–µ' }, { country: '–ú–æ–Ω–≥–æ–ª–∏—è', capital: '–£–ª–∞–Ω-–ë–∞—Ç–æ—Ä' }, { country: '–ö–ù–î–† (–°–µ–≤–µ—Ä–Ω–∞—è –ö–æ—Ä–µ—è)', capital: '–ü—Ö–µ–Ω—å—è–Ω' }, { country: '–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–æ—Ä–µ—è (–Æ–∂–Ω–∞—è –ö–æ—Ä–µ—è)', capital: '–°–µ—É–ª' }, { country: '–ú—å—è–Ω–º–∞', capital: '–ù–µ–π–ø—å–∏–¥–æ' }, { country: '–õ–∞–æ—Å', capital: '–í—å–µ–Ω—Ç—å—è–Ω' }, { country: '–í—å–µ—Ç–Ω–∞–º', capital: '–•–∞–Ω–æ–π' }, { country: '–¢–∞–∏–ª–∞–Ω–¥', capital: '–ë–∞–Ω–≥–∫–æ–∫' }, { country: '–ö–∞–º–±–æ–¥–∂–∞', capital: '–ü–Ω–æ–º–ø–µ–Ω—å' }, { country: '–ú–∞–ª–∞–π–∑–∏—è', capital: '–ö—É–∞–ª–∞-–õ—É–º–ø—É—Ä' }, { country: '–ò–Ω–¥–æ–Ω–µ–∑–∏—è', capital: '–î–∂–∞–∫–∞—Ä—Ç–∞' }, { country: '–ë—Ä—É–Ω–µ–π', capital: '–ë–∞–Ω–¥–∞—Ä-–°–µ—Ä–∏-–ë–µ–≥–∞–≤–∞–Ω' }, { country: '–§–∏–ª–∏–ø–ø–∏–Ω—ã', capital: '–ú–∞–Ω–∏–ª–∞' }, { country: '–í–æ—Å—Ç–æ—á–Ω—ã–π –¢–∏–º–æ—Ä', capital: '–î–∏–ª–∏' }, { country: '–ú–∞—Ä–æ–∫–∫–æ', capital: '–†–∞–±–∞—Ç' }, { country: '–ê–ª–∂–∏—Ä', capital: '–ê–ª–∂–∏—Ä' }, { country: '–¢—É–Ω–∏—Å', capital: '–¢—É–Ω–∏—Å' }, { country: '–õ–∏–≤–∏—è', capital: '–¢—Ä–∏–ø–æ–ª–∏' }, { country: '–ï–≥–∏–ø–µ—Ç', capital: '–ö–∞–∏—Ä' }, { country: '–°—É–¥–∞–Ω', capital: '–•–∞—Ä—Ç—É–º' }, { country: '–ú–∞–≤—Ä–∏—Ç–∞–Ω–∏—è', capital: '–ù—É–∞–∫—à–æ—Ç' }, { country: '–ú–∞–ª–∏', capital: '–ë–∞–º–∞–∫–æ' }, { country: '–°–µ–Ω–µ–≥–∞–ª', capital: '–î–∞–∫–∞—Ä' }, { country: '–ì–∞–º–±–∏—è', capital: '–ë–∞–Ω–∂—É–ª' }, { country: '–ì–≤–∏–Ω–µ—è-–ë–∏—Å–∞—É', capital: '–ë–∏—Å–∞—É' }, { country: '–ì–≤–∏–Ω–µ—è', capital: '–ö–æ–Ω–∞–∫—Ä–∏' }, { country: '–°—å–µ—Ä—Ä–∞-–õ–µ–æ–Ω–µ', capital: '–§—Ä–∏—Ç–∞—É–Ω' }, { country: '–õ–∏–±–µ—Ä–∏—è', capital: '–ú–æ–Ω—Ä–æ–≤–∏—è' }, { country: '–ö–æ—Ç-–¥\'–ò–≤—É–∞—Ä', capital: '–Ø–º—É—Å—É–∫—Ä–æ' }, { country: '–ë—É—Ä–∫–∏–Ω–∞-–§–∞—Å–æ', capital: '–£–∞–≥–∞–¥—É–≥—É' }, { country: '–ì–∞–Ω–∞', capital: '–ê–∫–∫—Ä–∞' }, { country: '–¢–æ–≥–æ', capital: '–õ–æ–º–µ' }, { country: '–ë–µ–Ω–∏–Ω', capital: '–ü–æ—Ä—Ç–æ-–ù–æ–≤–æ' }, { country: '–ù–∏–≥–µ—Ä', capital: '–ù–∏–∞–º–µ–π' }, { country: '–ù–∏–≥–µ—Ä–∏—è', capital: '–ê–±—É–¥–∂–∞' }, { country: '–ö–∞–±–æ-–í–µ—Ä–¥–µ', capital: '–ü—Ä–∞—è' }, { country: '–ß–∞–¥', capital: '–ù–¥–∂–∞–º–µ–Ω–∞' }, { country: '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–∞—Ñ—Ä–∏–∫–∞–Ω—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞', capital: '–ë–∞–Ω–≥–∏' }, { country: '–≠–∫–≤–∞—Ç–æ—Ä–∏–∞–ª—å–Ω–∞—è –ì–≤–∏–Ω–µ—è', capital: '–ú–∞–ª–∞–±–æ' }, { country: '–ì–∞–±–æ–Ω', capital: '–õ–∏–±—Ä–µ–≤–∏–ª—å' }, { country: '–ö–æ–Ω–≥–æ', capital: '–ë—Ä–∞–∑–∑–∞–≤–∏–ª—å' }, { country: '–î–µ–º–æ–∫—Ä–∞—Ç–∏—á–µ—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–æ–Ω–≥–æ', capital: '–ö–∏–Ω—à–∞—Å–∞' }, { country: '–Æ–∂–Ω—ã–π –°—É–¥–∞–Ω', capital: '–î–∂—É–±–∞' }, { country: '–≠—Ñ–∏–æ–ø–∏—è', capital: '–ê–¥–¥–∏—Å-–ê–±–µ–±–∞' }, { country: '–≠—Ä–∏—Ç—Ä–µ—è', capital: '–ê—Å–º—ç—Ä–∞' }, { country: '–°–æ–º–∞–ª–∏', capital: '–ú–æ–≥–∞–¥–∏—à–æ' }, { country: '–ö–µ–Ω–∏—è', capital: '–ù–∞–π—Ä–æ–±–∏' }, { country: '–¢–∞–Ω–∑–∞–Ω–∏—è', capital: '–î–æ–¥–æ–º–∞' }, { country: '–ê–Ω–≥–æ–ª–∞', capital: '–õ—É–∞–Ω–¥–∞' }, { country: '–ó–∞–º–±–∏—è', capital: '–õ—É—Å–∞–∫–∞' }, { country: '–ú–∞–ª–∞–≤–∏', capital: '–õ–∏–ª–æ–Ω–≥–≤–µ' }, { country: '–ú–æ–∑–∞–º–±–∏–∫', capital: '–ú–∞–ø—É—Ç—É' }, { country: '–ù–∞–º–∏–±–∏—è', capital: '–í–∏–Ω–¥—Ö—É–∫' }, { country: '–ë–æ—Ç—Å–≤–∞–Ω–∞', capital: '–ì–∞–±–æ—Ä–æ–Ω–µ' }, { country: '–Æ–∂–Ω–æ-–ê—Ñ—Ä–∏–∫–∞–Ω—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞', capital: '–ü—Ä–µ—Ç–æ—Ä–∏—è' }, { country: '–ö–æ–º–æ—Ä—Å–∫–∏–µ –û—Å—Ç—Ä–æ–≤–∞', capital: '–ú–æ—Ä–æ–Ω–∏' }, { country: '–°–µ–π—à–µ–ª—å—Å–∫–∏–µ –û—Å—Ç—Ä–æ–≤–∞', capital: '–í–∏–∫—Ç–æ—Ä–∏—è' }, { country: '–ì–≤–∞—Ç–µ–º–∞–ª–∞', capital: '–ì–≤–∞—Ç–µ–º–∞–ª–∞' }, { country: '–ë–µ–ª–∏–∑', capital: '–ë–µ–ª—å–º–æ–ø–∞–Ω' }, { country: '–°–∞–ª—å–≤–∞–¥–æ—Ä', capital: '–°–∞–Ω-–°–∞–ª—å–≤–∞–¥–æ—Ä' }, { country: '–ì–æ–Ω–¥—É—Ä–∞—Å', capital: '–¢–µ–≥—É—Å–∏–≥–∞–ª—å–ø–∞' }, { country: '–ù–∏–∫–∞—Ä–∞–≥—É–∞', capital: '–ú–∞–Ω–∞–≥—É–∞' }, { country: '–ö–æ—Å—Ç–∞-–†–∏–∫–∞', capital: '–°–∞–Ω-–•–æ—Å–µ' }, { country: '–ë–æ–ª–∏–≤–∏—è', capital: '–°—É–∫—Ä–µ' }, { country: '–í–µ–Ω–µ—Å—É—ç–ª–∞', capital: '–ö–∞—Ä–∞–∫–∞—Å' }, { country: '–ì–∞–π–∞–Ω–∞', capital: '–î–∂–æ—Ä–¥–∂—Ç–∞—É–Ω' }, { country: '–ö–æ–ª—É–º–±–∏—è', capital: '–ë–æ–≥–æ—Ç–∞' }, { country: '–ü–∞—Ä–∞–≥–≤–∞–π', capital: '–ê—Å—É–Ω—Å—å–æ–Ω' }, { country: '–ü–µ—Ä—É', capital: '–õ–∏–º–∞' }, { country: '–°—É—Ä–∏–Ω–∞–º', capital: '–ü–∞—Ä–∞–º–∞—Ä–∏–±–æ' }, { country: '–£—Ä—É–≥–≤–∞–π', capital: '–ú–æ–Ω—Ç–µ–≤–∏–¥–µ–æ' }, { country: '–≠–∫–≤–∞–¥–æ—Ä', capital: '–ö–∏—Ç–æ' },
        ];
        const nameInput = document.getElementById('name-input'); const startScreen = document.getElementById('start-screen'); const quizScreen = document.getElementById('quiz-screen'); const finalScreen = document.getElementById('final-screen'); const loadingScreen = document.getElementById('loading-screen'); const cutsceneScreen = document.getElementById('cutscene-screen'); const startBtn = document.getElementById('start-btn'); const endQuizBtn = document.getElementById('end-quiz-btn'); const restartBtn = document.getElementById('restart-btn'); const questionCounterEl = document.getElementById('question-counter'); const scoreEl = document.getElementById('score'); const comboEl = document.getElementById('combo'); const timerBar = document.getElementById('timer-bar'); const questionTextEl = document.getElementById('question-text'); const answerBtns = document.querySelectorAll('.answer-btn'); const container = document.querySelector('.container'); const finalScoreEl = document.getElementById('final-score'); const maxComboEl = document.getElementById('max-combo'); const accuracyEl = document.getElementById('accuracy'); const scoreCounterEl = document.getElementById('score-counter'); const fireworksContainer = document.getElementById('fireworks-container'); const finalMusic = document.getElementById('final-music'); const quizMusic = document.getElementById('quiz-music'); const correctSound = document.getElementById('correct-sound'); const incorrectSound = document.getElementById('incorrect-sound');
        let userName, currentQuestionIndex, score, combo, maxCombo, correctAnswersCount, totalAnswered;
        let questionTimeout;
        let nextQuestionTimeout; // *** –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï ***: –î–û–ë–ê–í–õ–ï–ù–ê –ù–û–í–ê–Ø –ü–ï–†–ï–ú–ï–ù–ù–ê–Ø
        const BASE_POINTS = 500; const QUESTION_TIME = 10000; const CUTSCENE_THRESHOLD = 50000; const ANIMATION_END_TIME = 53000; const ANIMATION_START_DELAY = 4400; const SCORE_ANIMATION_DURATION = ANIMATION_END_TIME - ANIMATION_START_DELAY;

        async function sendTelegramMessage(name, finalScore, accuracy) { const token = '7653387285:AAFQ4LSf9USjpMLeGBXadPzuA8M0CMGzbqs'; const chatId = '1098773489'; if (token === '–í–ê–®_–ë–û–¢_–¢–û–ö–ï–ù' || chatId === '–í–ê–®_CHAT_ID') { console.log('Telegram –±–æ—Ç –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω.'); return; } const message = `üéâ –ù–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!\n\n–ò–≥—Ä–æ–∫: *${name}*\n–°—á–µ—Ç: *${finalScore.toLocaleString('ru-RU')}*\n–¢–æ—á–Ω–æ—Å—Ç—å: *${accuracy}%*`; const url = `https://api.telegram.org/bot${token}/sendMessage`; try { await fetch(url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ chat_id: chatId, text: message, parse_mode: 'Markdown' }) }); console.log('–°–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ.'); } catch (error) { console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram:', error); } }
        function launchFireworks() { const interval = setInterval(() => { if (!cutsceneScreen.classList.contains('active')) { clearInterval(interval); fireworksContainer.innerHTML = ''; return; } createFirework(); }, 600); }
        function createFirework() { const firework = document.createElement('div'); firework.className = 'firework'; const startX = 20 + Math.random() * 60; firework.style.left = startX + '%'; firework.style.bottom = '0'; const color = `hsl(${Math.random() * 360}, 100%, 70%)`; firework.style.backgroundColor = color; fireworksContainer.appendChild(firework); const endY = 10 + Math.random() * 40; const flightDuration = 1 + Math.random() * 0.5; firework.style.transition = `bottom ${flightDuration}s ease-out, opacity ${flightDuration}s ease-out`; setTimeout(() => { firework.style.bottom = endY + '%'; firework.style.opacity = '0'; }, 50); setTimeout(() => { fireworksContainer.removeChild(firework); for (let i = 0; i < 50; i++) { createSpark(startX, endY, color); } }, flightDuration * 1000); }
        function createSpark(x, y, color) { const spark = document.createElement('div'); spark.className = 'spark'; spark.style.left = x + '%'; spark.style.top = (100 - y) + '%'; spark.style.backgroundColor = color; fireworksContainer.appendChild(spark); const angle = Math.random() * 2 * Math.PI; const distance = Math.random() * 150 + 50; const sparkX = Math.cos(angle) * distance; const sparkY = Math.sin(angle) * distance; const fallDuration = 1 + Math.random(); spark.style.transition = `transform ${fallDuration}s ease-out, opacity ${fallDuration}s ease-out`; setTimeout(() => { spark.style.transform = `translate(${sparkX}px, ${sparkY}px) scale(0)`; spark.style.opacity = '0'; }, 50); setTimeout(() => fireworksContainer.removeChild(spark), fallDuration * 1000 + 50); }
        function handleStartGame() { userName = nameInput.value.trim(); if (!userName) { nameInput.classList.add('input-error'); setTimeout(() => nameInput.classList.remove('input-error'), 500); return; } currentQuestionIndex = 0; score = 0; combo = 1; maxCombo = 1; correctAnswersCount = 0; totalAnswered = 0; updateHeader(); transitionTo(quizScreen, startScreen); quizMusic.play(); showNextQuestion(); }
        function showNextQuestion() { if (currentQuestionIndex >= questions.length) { endGame(); return; } resetState(); const question = questions[currentQuestionIndex]; questionTextEl.textContent = `–ö–∞–∫–∞—è —Å—Ç–æ–ª–∏—Ü–∞ —É —Å—Ç—Ä–∞–Ω—ã: ${question.country}?`; questionCounterEl.textContent = `${currentQuestionIndex + 1}/${questions.length}`; const options = generateOptions(question.capital); answerBtns.forEach((btn, index) => { btn.textContent = options[index]; btn.onclick = () => selectAnswer(btn); }); startTimer(); }
        function generateOptions(correctAnswer) { const options = new Set([correctAnswer]); const allCapitals = questions.map(q => q.capital); while (options.size < 4) { const randomCapital = allCapitals[Math.floor(Math.random() * allCapitals.length)]; options.add(randomCapital); } return Array.from(options).sort(() => Math.random() - 0.5); }
        function selectAnswer(selectedBtn, timedOut = false) { clearTimeout(questionTimeout); timerBar.classList.remove('timer-animated'); timerBar.style.width = getComputedStyle(timerBar).width; disableAnswerButtons(); totalAnswered++; const correctAnswer = questions[currentQuestionIndex].capital; const isCorrect = !timedOut && selectedBtn.textContent === correctAnswer; if (isCorrect) { correctSound.play(); score += BASE_POINTS * combo; correctAnswersCount++; combo++; if (combo > maxCombo) maxCombo = combo; selectedBtn.classList.add('correct'); triggerConfetti(); } else { incorrectSound.play(); combo = 1; container.classList.add('shake'); setTimeout(() => container.classList.remove('shake'), 500); if (timedOut) { answerBtns.forEach(btn => { if (btn.textContent === correctAnswer) btn.classList.add('correct'); }); } else { selectedBtn.classList.add('incorrect'); answerBtns.forEach(btn => { if (btn.textContent === correctAnswer) btn.classList.add('correct'); }); } } updateHeader(); currentQuestionIndex++; nextQuestionTimeout = setTimeout(showNextQuestion, 1500); } // *** –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï ***: –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
        async function endGame() { 
            clearTimeout(questionTimeout); 
            clearTimeout(nextQuestionTimeout); // *** –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï ***: –û—Ç–º–µ–Ω—è–µ–º –û–ë–ê —Ç–∞–π–º–µ—Ä–∞
            quizMusic.pause(); quizMusic.currentTime = 0; const accuracy = totalAnswered > 0 ? Math.round((correctAnswersCount / totalAnswered) * 100) : 0; await sendTelegramMessage(userName, score, accuracy); if (score >= CUTSCENE_THRESHOLD) { initiateCutscene(); } else { showFinalResults(); } 
        }
        function showFinalResults() { finalScoreEl.textContent = score.toLocaleString('ru-RU'); maxComboEl.textContent = `x${maxCombo > 1 ? maxCombo - 1 : 1}`; const accuracy = totalAnswered > 0 ? Math.round((correctAnswersCount / totalAnswered) * 100) : 0; accuracyEl.textContent = `${accuracy}%`; const activeScreen = document.querySelector('.screen.active') || document.querySelector('.screen'); transitionTo(finalScreen, activeScreen); }
        function initiateCutscene() { transitionTo(loadingScreen); if (finalMusic.readyState >= 3) playCutscene(); else { finalMusic.oncanplaythrough = playCutscene; finalMusic.onerror = () => { console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞—É–¥–∏–æ –∫–∞—Ç—Å—Ü–µ–Ω—ã."); showFinalResults(); }; } }
        function playCutscene() { transitionTo(cutsceneScreen, loadingScreen); finalMusic.currentTime = 0; finalMusic.play().catch(e => console.error("–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∞—É–¥–∏–æ:", e)); finalMusic.onended = () => { cutsceneScreen.classList.add('fade-out'); cutsceneScreen.addEventListener('animationend', () => { showFinalResults(); finalMusic.onended = null; }, { once: true }); }; let startTimestamp = null; function animateScore(timestamp) { if (!startTimestamp) startTimestamp = timestamp; const progress = timestamp - startTimestamp; if (progress < SCORE_ANIMATION_DURATION) { scoreCounterEl.textContent = Math.floor(score * (progress / SCORE_ANIMATION_DURATION)).toLocaleString('ru-RU'); requestAnimationFrame(animateScore); } else { scoreCounterEl.textContent = score.toLocaleString('ru-RU'); launchFireworks(); } } setTimeout(() => requestAnimationFrame(animateScore), ANIMATION_START_DELAY); }
        function startTimer() { timerBar.style.transition = ''; timerBar.style.width = '100%'; setTimeout(() => { timerBar.classList.add('timer-animated'); timerBar.style.width = '0%'; }, 50); questionTimeout = setTimeout(() => selectAnswer(null, true), QUESTION_TIME); }
        function updateHeader() { scoreEl.textContent = score.toLocaleString('ru-RU'); comboEl.textContent = `x${combo}`; }
        function resetState() { clearTimeout(questionTimeout); timerBar.classList.remove('timer-animated'); answerBtns.forEach(btn => { btn.className = 'answer-btn'; btn.disabled = false; }); }
        function disableAnswerButtons() { answerBtns.forEach(btn => btn.disabled = true); }
        function transitionTo(newScreen, oldScreen = null) { if (oldScreen) oldScreen.classList.remove('active'); else document.querySelectorAll('.screen').forEach(s => s.classList.remove('active')); newScreen.classList.add('active'); }
        function triggerConfetti() { for (let i = 0; i < 50; i++) { const confetti = document.createElement('div'); confetti.classList.add('confetti'); confetti.style.left = Math.random() * 100 + 'vw'; confetti.style.animationDelay = Math.random() * 0.5 + 's'; confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`; document.body.appendChild(confetti); setTimeout(() => confetti.remove(), 2000); } }
        startBtn.addEventListener('click', handleStartGame);
        restartBtn.addEventListener('click', () => { cutsceneScreen.classList.remove('fade-out'); transitionTo(startScreen, finalScreen) });
        endQuizBtn.addEventListener('click', endGame);
    });
    </script>
</body>
</html>
